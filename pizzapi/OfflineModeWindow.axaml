<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="using:pizzapi"
        x:Class="pizzapi.OfflineModeWindow"
        x:DataType="local:OfflineModeWindow"
        Title="Open Offline Capture"
        Width="550"
        Height="400"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        CanResize="False">
    <Border Padding="20">
        <DockPanel>
            <TextBlock Text="Open Offline Capture"
                       FontSize="20"
                       FontWeight="Bold"
                       DockPanel.Dock="Top"
                       Margin="0,0,0,15" />

            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Spacing="10"
                        DockPanel.Dock="Bottom"
                        Margin="0,15,0,0">
                <Button x:Name="CancelButton" Content="Cancel" Width="100" />
                <Button x:Name="OpenButton" 
                        Content="Open" 
                        Width="100"
                        Background="#4CAF50"
                        Foreground="White" />
            </StackPanel>

            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="20">
                    <!-- Folder Selection -->
                    <Border Background="#2d2d2d" CornerRadius="8" Padding="15">
                        <StackPanel Spacing="10">
                            <TextBlock Text="Capture Folder"
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="#00d2ff" />
                            <TextBlock FontSize="12"
                                       Foreground="Gray"
                                       Text="Select a folder containing captured calls (.bin files)" />
                            
                            <Grid ColumnDefinitions="*,Auto" Margin="0,10,0,0">
                                <TextBox x:Name="FolderPathTextBox" 
                                         Grid.Column="0"
                                         IsReadOnly="True"
                                         PlaceholderText="Select a folder..." />
                                <Button x:Name="BrowseButton"
                                        Grid.Column="1"
                                        Content="Browse..."
                                        Margin="10,0,0,0"
                                        Padding="15,5" />
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Information -->
                    <Border Background="#2d2d2d" CornerRadius="8" Padding="15">
                        <StackPanel Spacing="10">
                            <TextBlock Text="Information"
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="#ffaa00" />
                            <StackPanel Spacing="8">
                                <TextBlock FontSize="12"
                                           Foreground="White"
                                           TextWrapping="Wrap">
                                    <Run FontWeight="Bold">Supported formats:</Run>
                                </TextBlock>
                                <TextBlock FontSize="12"
                                           Foreground="White"
                                           TextWrapping="Wrap"
                                           Margin="10,0,0,0">
                                    • <Run Foreground="#00d2ff">.mp3 files</Run> - From prior live captures (select the capture session folder)
                                </TextBlock>
                                <TextBlock FontSize="12"
                                           Foreground="White"
                                           TextWrapping="Wrap"
                                           Margin="10,0,0,0">
                                    • <Run Foreground="#00d2ff">.bin files</Run> - From Trunk-Recorder SFTP offline backup
                                </TextBlock>
                                <TextBlock FontSize="12"
                                           Foreground="White"
                                           TextWrapping="Wrap"
                                           Margin="0,8,0,0">
                                    <Run FontWeight="Bold">Note:</Run> Loading an offline capture will stop the live call manager.
                                </TextBlock>
                                <TextBlock FontSize="12"
                                           Foreground="White"
                                           TextWrapping="Wrap">
                                    <Run FontWeight="Bold">Offline mode:</Run> You can view historical calls but cannot receive new live calls.
                                </TextBlock>
                                <TextBlock FontSize="12"
                                           Foreground="White"
                                           TextWrapping="Wrap">
                                    <Run FontWeight="Bold">Alerts:</Run> Alert matches will be highlighted, but no email notifications will be sent.
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Progress (shown during loading) -->
                    <Border x:Name="ProgressBorder"
                            Background="#2d2d2d" 
                            CornerRadius="8" 
                            Padding="15"
                            IsVisible="False">
                        <StackPanel Spacing="10">
                            <TextBlock Text="Loading..."
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="#00ff00" />
                            <TextBlock x:Name="ProgressText"
                                       FontSize="12"
                                       Foreground="White" />
                            <ProgressBar x:Name="ProgressBar"
                                         Minimum="0"
                                         Maximum="100"
                                         Height="20" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </DockPanel>
    </Border>
</Window>
